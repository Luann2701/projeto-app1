<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Horários Fixos</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>

<body class="fundo-logo">

<div class="card grande">

    <h1>⏰ Horários Fixos</h1>

    {% if fixos %}
        {% for f in fixos %}
            <div class="bloco-fixo">

                <!-- ===== INFO DO CLIENTE ===== -->
                <div class="info-fixo">
                    <p><strong>Nome:</strong> {{ f.cliente }}</p>
                    <p><strong>Telefone:</strong> {{ f.telefone }}</p>
                    <p><strong>Email:</strong> {{ f.email }}</p>
                    <p><strong>Quadra:</strong> {{ f.quadra }}</p>
                    <p><strong>Hora:</strong> {{ f.hora }}</p>

                    <!-- CANCELAR DEFINITIVO -->
                    <form method="POST"
                          action="/admin/cancelar_fixo_definitivo"
                          onsubmit="return confirm('Cancelar este horário FIXO definitivamente?');">
                        <input type="hidden" name="fixo_id" value="{{ f.id }}">
                        <button type="submit" class="btn pequeno secundario">
                            ❌ Cancelar definitivo
                        </button>
                    </form>
                </div>

                <!-- ===== DATAS DO MÊS ===== -->
                <div class="datas-fixo">
                    <p><strong>Dias deste mês:</strong></p>

                    {% for d in f.datas %}
                        <form method="POST"
                              action="/admin/cancelar_fixo_dia"
                              style="display:inline;"
                              onsubmit="return confirm('Cancelar APENAS no dia {{ d.data.strftime('%d/%m/%Y') }}?');">

                            <input type="hidden" name="fixo_id" value="{{ f.id }}">
                            <input type="hidden" name="data" value="{{ d.data.strftime('%Y-%m-%d') }}">

                            {% if d.cancelado %}
                                <button type="button" class="btn pequeno secundario" disabled>
                                    {{ d.data.strftime('%d/%m') }} ❌
                                </button>
                            {% else %}
                                <button type="submit" class="btn pequeno">
                                    {{ d.data.strftime('%d/%m') }}
                                </button>
                            {% endif %}
                        </form>
                    {% endfor %}
                </div>

            </div>

            <hr>
        {% endfor %}
    {% else %}
        <p style="text-align:center;">Nenhum horário fixo cadastrado.</p>
    {% endif %}

    <div style="text-align:center; margin-top:20px;">
        <a href="/painel_dono" class="btn secundario">⬅ Voltar ao painel</a>
    </div>

</div>

</body>
</html>
